{"ast":null,"code":"import { GET_GAMES, GET_GAMES_BY_ID, GET_GENRES, POST_GAMES, ORIGIN_FILTERED_GAMES, GENRE_FILTERED_GAMES, RATING_ORDERED_GAMES, LETTERS_ORDERED_GAMES } from './action-types';\nconst initialState = {\n  allVideogames: [],\n  genres: [],\n  filteredGames: [],\n  detail: []\n};\n\n//----en la siguiente linea inicio el reducer, pasandole por parametros el stado inicial y las actions destructuradas--//\nconst reducer = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  let {\n    type,\n    payload\n  } = arguments.length > 1 ? arguments[1] : undefined;\n  // utilizo un switch para no hacer \"if\" encadenados o en cascadas.\n  switch (type) {\n    ///casos de recuperacion de datos o de carga de los mismos\n    case GET_GAMES:\n      return {\n        ...state,\n        allVideogames: payload\n      };\n    case GET_GAMES_BY_ID:\n      return {\n        ...state,\n        detail: payload\n      };\n    case GET_GENRES:\n      return {\n        ...state,\n        genres: payload\n      };\n    case POST_GAMES:\n      return {\n        ...state\n      };\n    //casos de ordenamiento o filtrado\n    case ORIGIN_FILTERED_GAMES:\n      const filteredFrom = payload === 'db' ? [...state.allVideogames].filter(game => isNaN(parseInt(game.id))) : payload === 'api' ? [...state.allVideogames].filter(game => !isNaN(parseInt(game.id))) : [...state.allVideogames];\n      return {\n        ...state,\n        filteredGames: filteredFrom\n      };\n    case GENRE_FILTERED_GAMES:\n      let genreFiltered = state.genres.find(genre => genre.name === payload);\n      const genreFilteredGames = [...state.allVideogames].filter(game => {\n        var _game$genres;\n        return (_game$genres = game.genres) === null || _game$genres === void 0 ? void 0 : _game$genres.some(genre => genre.name === (genreFiltered === null || genreFiltered === void 0 ? void 0 : genreFiltered.name));\n      });\n      if (payload === 'All') return {\n        ...state\n      };else {\n        return {\n          ...state,\n          genreFilteredGames\n        };\n      }\n    case RATING_ORDERED_GAMES:\n      const allVideogamesCopy = [...state.allVideogames];\n      const orderedGames = payload === 'A' ? allVideogamesCopy.sort((a, b) => a.rating - b.rating) : payload === 'D' ? allVideogamesCopy.sort((a, b) => b.rating - a.rating) : [...state.allVideogames];\n      return {\n        ...state,\n        orderedGames: orderedGames\n      };\n    case LETTERS_ORDERED_GAMES:\n      const allVideogamesCopy2 = [...state.allVideogames];\n      const orderedGamesByName = payload === 'A' ? allVideogamesCopy2.sort((a, b) => a.name.toLowerCase().localeCompare(b.name.toLowerCase())) : payload === 'D' ? allVideogamesCopy2.sort((a, b) => b.name.toLowerCase().localeCompare(a.name.toLowerCase())) : [...state.allVideogames];\n      return {\n        ...state,\n        orderedGames: orderedGamesByName\n      };\n    default:\n      return {\n        ...state\n      };\n  }\n};\nexport default reducer;","map":{"version":3,"names":["GET_GAMES","GET_GAMES_BY_ID","GET_GENRES","POST_GAMES","ORIGIN_FILTERED_GAMES","GENRE_FILTERED_GAMES","RATING_ORDERED_GAMES","LETTERS_ORDERED_GAMES","initialState","allVideogames","genres","filteredGames","detail","reducer","state","arguments","length","undefined","type","payload","filteredFrom","filter","game","isNaN","parseInt","id","genreFiltered","find","genre","name","genreFilteredGames","_game$genres","some","allVideogamesCopy","orderedGames","sort","a","b","rating","allVideogamesCopy2","orderedGamesByName","toLowerCase","localeCompare"],"sources":["C:/Users/rodri/Desktop/PI-Videogames/PI-videogames/client/src/redux/reducer.js"],"sourcesContent":["\r\nimport {GET_GAMES, GET_GAMES_BY_ID, GET_GENRES, POST_GAMES, ORIGIN_FILTERED_GAMES, GENRE_FILTERED_GAMES, RATING_ORDERED_GAMES, LETTERS_ORDERED_GAMES } from './action-types'\r\n\r\nconst initialState={\r\n    allVideogames:[],\r\n    genres:[],\r\n    filteredGames: [],\r\n    detail: []\r\n}\r\n\r\n//----en la siguiente linea inicio el reducer, pasandole por parametros el stado inicial y las actions destructuradas--//\r\nconst reducer= (state = initialState, {type, payload})=>{\r\n\r\n// utilizo un switch para no hacer \"if\" encadenados o en cascadas.\r\n    switch(type){\r\n///casos de recuperacion de datos o de carga de los mismos\r\n        case GET_GAMES:\r\n            return{\r\n            ...state,\r\n            allVideogames:payload,\r\n        }\r\n        case GET_GAMES_BY_ID:\r\n            return{\r\n                ...state,\r\n                detail:payload,\r\n            }\r\n        case GET_GENRES:\r\n            return{\r\n                ...state,\r\n                genres:payload\r\n            }\r\n        case POST_GAMES:\r\n            return{\r\n                ...state,\r\n            }\r\n//casos de ordenamiento o filtrado\r\ncase ORIGIN_FILTERED_GAMES:\r\n    const filteredFrom =\r\n      payload === 'db'\r\n        ? [...state.allVideogames].filter((game) => isNaN(parseInt(game.id)))\r\n        : payload === 'api'\r\n        ? [...state.allVideogames].filter((game) => !isNaN(parseInt(game.id)))\r\n        : [...state.allVideogames];\r\n        return {\r\n            ...state,\r\n            filteredGames:filteredFrom,\r\n        }\r\n        case GENRE_FILTERED_GAMES:\r\n            let genreFiltered = state.genres.find((genre) => genre.name === payload);\r\n            const genreFilteredGames = [...state.allVideogames].filter(\r\n              (game) => game.genres?.some((genre) => genre.name === genreFiltered?.name)\r\n            );\r\n            if (payload === 'All') return{\r\n                ...state,\r\n            }\r\n            else{\r\n                return{\r\n                    ...state,\r\n                    genreFilteredGames,\r\n                } \r\n            }\r\n        case RATING_ORDERED_GAMES:\r\n            const allVideogamesCopy = [...state.allVideogames];\r\n            const orderedGames = payload === 'A' ? allVideogamesCopy.sort((a, b) => a.rating - b.rating)\r\n            : payload === 'D' ? allVideogamesCopy.sort((a, b) => b.rating - a.rating)\r\n            : [...state.allVideogames];\r\n         return {\r\n            ...state,\r\n            orderedGames: orderedGames,\r\n        };\r\n            case LETTERS_ORDERED_GAMES:\r\n                const allVideogamesCopy2 = [...state.allVideogames];\r\n                const orderedGamesByName = payload === 'A'\r\n                  ? allVideogamesCopy2.sort((a, b) => a.name.toLowerCase().localeCompare(b.name.toLowerCase()))\r\n                  : payload === 'D'\r\n                  ? allVideogamesCopy2.sort((a, b) => b.name.toLowerCase().localeCompare(a.name.toLowerCase()))\r\n                  : [...state.allVideogames];\r\n                return {\r\n                  ...state,\r\n                  orderedGames: orderedGamesByName,\r\n                };\r\n        default:\r\n           return { ...state};\r\n    }\r\n}\r\n\r\nexport default reducer;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}