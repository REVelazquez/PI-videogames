{"ast":null,"code":"import { GET_GAMES, GET_GAMES_BY_ID, GET_GENRES, POST_GAMES, ORIGIN_FILTERED_GAMES, GENRE_FILTERED_GAMES, RATING_ORDERED_GAMES, LETTERS_ORDERED_GAMES } from './action-types';\nconst initialState = {\n  allVideogames: [],\n  genres: [],\n  filteredGames: []\n};\n\n//----en la siguiente linea inicio el reducer, pasandole por parametros el stado inicial y las actions destructuradas--//\nconst reducer = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  let {\n    type,\n    payload\n  } = arguments.length > 1 ? arguments[1] : undefined;\n  //esta constante es para usar en los casos de ordenamiento y filtrado\n  const allGames = state.allVideogames;\n  // utilizo un switch para no hacer \"if\" encadenados o en cascadas.\n  switch (type) {\n    ///casos de recuperacion de datos o de carga de los mismos\n    case GET_GAMES:\n      return {\n        ...state,\n        allVideogames: payload\n      };\n    case GET_GAMES_BY_ID:\n      return {\n        ...state,\n        filteredGames: payload\n      };\n    case GET_GENRES:\n      return {\n        ...state,\n        genres: payload\n      };\n    case POST_GAMES:\n      return {\n        ...state\n      };\n    //casos de ordenamiento o filtrado\n    case ORIGIN_FILTERED_GAMES:\n      const filteredFrom = payload === 'db' ? [...state].filter(games => games.created) : payload === 'api' ? [...state.allVideogames].filter(games => !games.created) : [...state.allVideogames];\n      return {\n        ...state,\n        filteredGames: filteredFrom\n      };\n    case GENRE_FILTERED_GAMES:\n      const genreFilteredGames = allGames.filter(game => game.genre === payload);\n      if (payload === 'All') return {\n        ...state,\n        allGames\n      };else {\n        return {\n          ...state,\n          genreFilteredGames\n        };\n      }\n    case RATING_ORDERED_GAMES:\n      const allVideogamesCopy = [...state.allVideogames];\n      return {\n        ...state,\n        orderedGames: payload === 'A' ? allVideogamesCopy.sort((a, b) => a.rating - b.rating) : allVideogamesCopy.sort((a, b) => b.rating - a.rating)\n      };\n    case LETTERS_ORDERED_GAMES:\n      const allVideogamesCopy2 = [...state.allVideogames];\n      return {\n        ...state,\n        orderedGames: payload === 'A-Z' ? allVideogamesCopy2.sort((a, b) => {\n          if (a.name.toLowerCase() < b.name.toLowerCase()) {\n            return -1;\n          }\n          if (a.name.toLowerCase() > b.name.toLowerCase()) {\n            return 1;\n          }\n          return 0;\n        }) : allVideogamesCopy2.sort((a, b) => {\n          if (a.name.toLowerCase() > b.name.toLowerCase()) {\n            return -1;\n          }\n          if (a.name.toLowerCase() < b.name.toLowerCase()) {\n            return 1;\n          }\n          return 0;\n        })\n      };\n    default:\n      return {\n        ...state\n      };\n  }\n};","map":{"version":3,"names":["GET_GAMES","GET_GAMES_BY_ID","GET_GENRES","POST_GAMES","ORIGIN_FILTERED_GAMES","GENRE_FILTERED_GAMES","RATING_ORDERED_GAMES","LETTERS_ORDERED_GAMES","initialState","allVideogames","genres","filteredGames","reducer","state","arguments","length","undefined","type","payload","allGames","filteredFrom","filter","games","created","genreFilteredGames","game","genre","allVideogamesCopy","orderedGames","sort","a","b","rating","allVideogamesCopy2","name","toLowerCase"],"sources":["C:/Users/rodri/Desktop/PI-Videogames/PI-videogames/client/src/redux/reducer.js"],"sourcesContent":["\r\nimport {GET_GAMES, GET_GAMES_BY_ID, GET_GENRES, POST_GAMES, ORIGIN_FILTERED_GAMES, GENRE_FILTERED_GAMES, RATING_ORDERED_GAMES, LETTERS_ORDERED_GAMES } from './action-types'\r\n\r\nconst initialState={\r\n    allVideogames:[],\r\n    genres: [],\r\n    filteredGames: []\r\n}\r\n\r\n//----en la siguiente linea inicio el reducer, pasandole por parametros el stado inicial y las actions destructuradas--//\r\nconst reducer= (state = initialState, {type, payload})=>{\r\n\r\n//esta constante es para usar en los casos de ordenamiento y filtrado\r\n    const allGames = state.allVideogames\r\n// utilizo un switch para no hacer \"if\" encadenados o en cascadas.\r\n    switch(type){\r\n///casos de recuperacion de datos o de carga de los mismos\r\n        case GET_GAMES:\r\n            return{\r\n            ...state,\r\n            allVideogames:payload,\r\n        }\r\n        case GET_GAMES_BY_ID:\r\n            return{\r\n                ...state,\r\n                filteredGames:payload,\r\n            }\r\n        case GET_GENRES:\r\n            return{\r\n                ...state,\r\n                genres:payload\r\n            }\r\n        case POST_GAMES:\r\n            return{\r\n                ...state,\r\n            }\r\n//casos de ordenamiento o filtrado\r\n        case ORIGIN_FILTERED_GAMES:\r\n        const filteredFrom =  \r\n            payload === 'db'\r\n            ? [...state].filter(games=>games.created)\r\n            : payload === 'api'\r\n            ? [...state.allVideogames].filter(games => !games.created)\r\n            :[...state.allVideogames]\r\n        return {\r\n            ...state,\r\n            filteredGames:filteredFrom,\r\n        }\r\n        case GENRE_FILTERED_GAMES:\r\n            const genreFilteredGames = allGames.filter(game=> game.genre === payload)\r\n            if (payload === 'All') return{\r\n                ...state,\r\n                allGames,\r\n            }\r\n            else{\r\n                return{\r\n                    ...state,\r\n                    genreFilteredGames,\r\n                } \r\n            }\r\n        case RATING_ORDERED_GAMES:\r\n            const allVideogamesCopy = [...state.allVideogames]\r\n            return{\r\n                ...state,\r\n                orderedGames:\r\n                payload === 'A'\r\n                ?allVideogamesCopy.sort((a, b)=>a.rating - b.rating)\r\n                :allVideogamesCopy.sort((a, b)=>b.rating - a.rating)\r\n            }\r\n            case LETTERS_ORDERED_GAMES:\r\n                const allVideogamesCopy2 = [...state.allVideogames]\r\n                return{\r\n                    ...state,\r\n                    orderedGames:\r\n                    payload === 'A-Z'\r\n                    ?allVideogamesCopy2.sort((a, b)=> {\r\n                    if(a.name.toLowerCase() < b.name.toLowerCase()) { return -1; }\r\n                    if(a.name.toLowerCase() > b.name.toLowerCase()) { return  1; }\r\n                    return 0\r\n                    })\r\n                    :allVideogamesCopy2.sort((a, b)=> {\r\n                        if(a.name.toLowerCase() > b.name.toLowerCase()) { return -1; }\r\n                        if(a.name.toLowerCase() < b.name.toLowerCase()) { return  1; }\r\n                        return 0\r\n                        })\r\n                }           \r\n        default:\r\n           return { ...state};\r\n    }\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}